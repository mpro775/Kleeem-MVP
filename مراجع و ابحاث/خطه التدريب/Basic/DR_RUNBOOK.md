# ๐ Kaleem AI --- Disaster Recovery Runbook

ูุฐุง ุงูููู ููุถุญ ุฎุทูุงุช ุงุณุชุนุงุฏุฉ ุงูุฎุฏูุฉ ูุงูุจูุงูุงุช ูู ุญุงู ุญุฏูุซ ูุงุฑุซุฉ (ููุฏุงู
ุจูุงูุงุชุ ุชุนุทู ุฎุงุฏูุ ุงุฎุชุฑุงู).

------------------------------------------------------------------------

## 1๏ธโฃ ุงูุงุณุชุนุฏุงุฏ (Preparation)

-   ุฌููุน ุงูุฎุฏูุงุช ุชุนูู ุนุจุฑ **Docker Compose**.
-   ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุชูุฃุฎุฐ ูููููุง ุจุงุณุชุฎุฏุงู restic+rclone ุฅูู Cloudflare
    R2.
-   ูููุงุช ุงูุชููุฆุฉ ููุฌูุฏุฉ ูู:
    -   `/etc/restic-s3.env`
    -   `/etc/restic.pass`
    -   `/opt/kaleem/scripts/kaleem-backup.r2.sh`

------------------------------------------------------------------------

## 2๏ธโฃ ุฎุทูุงุช ุงูุงุณุชุนุงุฏุฉ (Restore Steps)

### ุงุณุชุนุงุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

``` bash
export RESTIC_REPOSITORY="rclone:r2:kaleem-backup/restic"
export RESTIC_PASSWORD_FILE="/etc/restic.pass"

# ุนุฑุถ ุงููุณุฎ ุงููุชููุฑุฉ
restic snapshots

# ุงุณุชุนุงุฏุฉ ุขุฎุฑ ูุณุฎุฉ
restic restore latest --target /restore-path
```

### ุงุณุชุนุงุฏุฉ ุงูุฎุฏูุงุช (Docker)

``` bash
cd /opt/kaleem
docker compose down
docker compose pull
docker compose up -d
```

### ุงูุชุญูู ูู ุงูุตุญุฉ (Health Check)

-   ุงูุชุญ `/health` endpoint ููู Backend.
-   ุชุญูู ูู ุฏุฎูู ุงูู Frontend (Web + Mobile).
-   ุชุญูู ูู ูุธุงุฆู AI Embeddings + Qdrant.

------------------------------------------------------------------------

## 3๏ธโฃ ุฎุทุฉ ุงูุทูุงุฑุฆ (Fallback)

-   ูู ุญุงู ูุดู ุงูุงุณุชุนุงุฏุฉ ุงููุงููุฉ:
    -   ุงุณุชุนุงุฏุฉ ูุณุฎุฉ DB ูู ุงูุฃูุณ ููุท.
    -   ุชุดุบูู Frontend ูุน Read-only APIs.
    -   ุฅุฑุณุงู ุฅุดุนุงุฑ ููุนููุงุก ุจุงููุทุงุน ุงูุฎุฏูุฉ ูุคูุชูุง.

------------------------------------------------------------------------

## 4๏ธโฃ ุฃุฏูุงุฑ ููุณุคูููุงุช (Roles)

-   **Incident Commander:** ูุณุคูู ุนู ุงููุฑุงุฑุงุช ุงูููุงุฆูุฉ.
-   **Backend Lead:** ุงุณุชุนุงุฏุฉ DB + APIs.
-   **DevOps:** ุฅุฏุงุฑุฉ Docker + VPS + TLS.
-   **Support:** ุงูุชูุงุตู ูุน ุงูุนููุงุก.

------------------------------------------------------------------------

## 5๏ธโฃ ุงูุชูุงุตู (Communication)

-   ููุงุฉ Telegram ุฏุงุฎููุฉ ููุชูุจููุงุช.
-   ุจุฑูุฏ incident@kaleem-ai.com ููุชูุงุฑูุฑ.
-   ุชุญุฏูุซ ุงูุนููุงุก ุนุจุฑ ููุญุฉ ุงูุชุญูู ุฃู ุงูุจุฑูุฏ.

------------------------------------------------------------------------

โ ูุฌุจ ุงุฎุชุจุงุฑ ุฎุทุฉ ุงูุงุณุชุนุงุฏุฉ ูู 3 ุฃุดูุฑ.
